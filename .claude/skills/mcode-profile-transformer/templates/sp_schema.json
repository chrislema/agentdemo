{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "mcode-synthetic-profile-v1.0",
  "title": "MCode Synthetic Profile",
  "description": "Schema for validating MCode Synthetic Profile JSON files",
  "type": "object",
  "required": [
    "schema_version",
    "persona_id",
    "assessment_date",
    "identity",
    "motivational_core",
    "dimensions",
    "motivational_flow",
    "achievement_stories",
    "interaction_patterns",
    "synthetic_response_guidance",
    "notable_patterns"
  ],
  "properties": {
    "schema_version": {
      "type": "string",
      "const": "1.0"
    },
    "persona_id": {
      "type": "string",
      "pattern": "^[a-z]+-[a-z]+-mcode-\\d{3}$"
    },
    "assessment_date": {
      "type": "string",
      "format": "date"
    },
    "identity": {
      "type": "object",
      "required": ["display_name", "persona_type", "source"],
      "properties": {
        "display_name": { "type": "string", "minLength": 1 },
        "persona_type": { "type": "string", "const": "synthetic_user" },
        "source": { "type": "string", "const": "mcode_assessment" }
      }
    },
    "motivational_core": {
      "type": "object",
      "required": ["top_5", "full_ranking"],
      "properties": {
        "top_5": {
          "type": "array",
          "minItems": 5,
          "maxItems": 5,
          "items": {
            "type": "object",
            "required": ["rank", "name", "score", "description", "drivers", "thriving_environments", "struggling_environments", "flip_side"],
            "properties": {
              "rank": { "type": "integer", "minimum": 1, "maximum": 5 },
              "name": { "type": "string", "enum": [
                "Advance", "Architect", "Be Key", "Be Unique", "Collaborate",
                "Comprehend And Express", "Demonstrate Learning", "Design", "Develop",
                "Do It Right", "Establish", "Evoke Recognition", "Excel",
                "Experience The Ideal", "Explore", "Finish", "Gain Ownership",
                "Identify Potential", "Improve", "Make An Impact", "Make It Work",
                "Make The Team", "Mastery", "Maximize", "Meet Needs", "Meet Requirements",
                "Meet The Challenge", "Overcome", "Persuade", "Realize The Vision",
                "Systematize", "Take Charge"
              ]},
              "score": { "type": "number", "minimum": 0, "maximum": 10 },
              "description": { "type": "string", "minLength": 10 },
              "drivers": {
                "type": "object",
                "minProperties": 4,
                "maxProperties": 4
              },
              "thriving_environments": {
                "type": "array",
                "minItems": 3,
                "maxItems": 5,
                "items": { "type": "string" }
              },
              "struggling_environments": {
                "type": "array",
                "minItems": 2,
                "maxItems": 4,
                "items": { "type": "string" }
              },
              "flip_side": { "type": "string", "minLength": 20 }
            }
          }
        },
        "full_ranking": {
          "type": "array",
          "minItems": 32,
          "maxItems": 32,
          "items": {
            "type": "object",
            "required": ["rank", "name", "score"],
            "properties": {
              "rank": { "type": "integer", "minimum": 1, "maximum": 32 },
              "name": { "type": "string" },
              "score": { "type": "number", "minimum": 0, "maximum": 10 }
            }
          }
        }
      }
    },
    "dimensions": {
      "type": "object",
      "required": ["strongest", "weakest"],
      "properties": {
        "strongest": {
          "type": "array",
          "minItems": 2,
          "maxItems": 4,
          "items": {
            "type": "object",
            "required": ["name", "description", "blind_spots"],
            "properties": {
              "name": { 
                "type": "string",
                "enum": ["Achiever", "Driver", "Influencer", "Learner", "Optimizer", "Orchestrator", "Relator", "Visionary"]
              },
              "description": { "type": "string", "minLength": 50 },
              "blind_spots": {
                "type": "object",
                "required": ["when_not_at_best", "advice"],
                "properties": {
                  "when_not_at_best": { "type": "string", "minLength": 20 },
                  "advice": { "type": "string", "minLength": 20 }
                }
              }
            }
          }
        },
        "weakest": {
          "type": "array",
          "minItems": 1,
          "maxItems": 3,
          "items": {
            "type": "string",
            "enum": ["Achiever", "Driver", "Influencer", "Learner", "Optimizer", "Orchestrator", "Relator", "Visionary"]
          }
        }
      }
    },
    "motivational_flow": {
      "type": "object",
      "required": ["prompts", "process", "payoffs"],
      "properties": {
        "prompts": {
          "type": "object",
          "required": ["description", "patterns"],
          "properties": {
            "description": { "type": "string" },
            "patterns": { "type": "array", "minItems": 4, "items": { "type": "string" } }
          }
        },
        "process": {
          "type": "object",
          "required": ["description", "patterns"],
          "properties": {
            "description": { "type": "string" },
            "patterns": { "type": "array", "minItems": 4, "items": { "type": "string" } }
          }
        },
        "payoffs": {
          "type": "object",
          "required": ["description", "patterns"],
          "properties": {
            "description": { "type": "string" },
            "patterns": { "type": "array", "minItems": 4, "items": { "type": "string" } }
          }
        }
      }
    },
    "achievement_stories": {
      "type": "array",
      "minItems": 3,
      "maxItems": 5,
      "items": {
        "type": "object",
        "required": ["id", "title", "summary", "situation", "what_got_involved", "what_did", "what_made_satisfying", "motivations_expressed"],
        "properties": {
          "id": { "type": "string", "pattern": "^story_[1-5]$" },
          "title": { "type": "string", "minLength": 5 },
          "summary": { "type": "string", "minLength": 20 },
          "situation": { "type": "string", "minLength": 10 },
          "what_got_involved": { "type": "string", "minLength": 10 },
          "what_did": { "type": "string", "minLength": 20 },
          "what_made_satisfying": {
            "type": "array",
            "minItems": 2,
            "items": { "type": "string" }
          },
          "motivations_expressed": {
            "type": "array",
            "minItems": 3,
            "maxItems": 6,
            "items": { "type": "string" }
          }
        }
      }
    },
    "interaction_patterns": {
      "type": "object",
      "required": ["how_to_engage", "how_to_pitch_to", "how_to_negotiate_with", "communication_style"],
      "properties": {
        "how_to_engage": {
          "type": "object",
          "required": ["effective_approaches", "ineffective_approaches"],
          "properties": {
            "effective_approaches": { "type": "array", "minItems": 4, "items": { "type": "string" } },
            "ineffective_approaches": { "type": "array", "minItems": 4, "items": { "type": "string" } }
          }
        },
        "how_to_pitch_to": {
          "type": "object",
          "required": ["key_appeals", "language_that_resonates"],
          "properties": {
            "key_appeals": { "type": "array", "minItems": 3, "items": { "type": "string" } },
            "language_that_resonates": { "type": "array", "minItems": 10, "items": { "type": "string" } }
          }
        },
        "how_to_negotiate_with": {
          "type": "object",
          "required": ["approach", "avoid"],
          "properties": {
            "approach": { "type": "string", "minLength": 50 },
            "avoid": { "type": "string", "minLength": 30 }
          }
        },
        "communication_style": {
          "type": "object",
          "required": ["preferences", "likely_to_dismiss"],
          "properties": {
            "preferences": { "type": "array", "minItems": 3, "items": { "type": "string" } },
            "likely_to_dismiss": { "type": "array", "minItems": 3, "items": { "type": "string" } }
          }
        }
      }
    },
    "synthetic_response_guidance": {
      "type": "object",
      "required": ["when_asked_about_new_opportunity", "when_asked_how_to_approach_problem", "when_facing_setback", "values_hierarchy"],
      "properties": {
        "when_asked_about_new_opportunity": {
          "type": "object",
          "required": ["will_look_for", "will_be_drawn_to", "will_avoid"],
          "properties": {
            "will_look_for": { "type": "array", "minItems": 4, "items": { "type": "string" } },
            "will_be_drawn_to": { "type": "string", "minLength": 30 },
            "will_avoid": { "type": "string", "minLength": 30 }
          }
        },
        "when_asked_how_to_approach_problem": {
          "type": "object",
          "required": ["typical_process"],
          "properties": {
            "typical_process": { "type": "array", "minItems": 4, "items": { "type": "string" } }
          }
        },
        "when_facing_setback": {
          "type": "object",
          "required": ["likely_response"],
          "properties": {
            "likely_response": { "type": "string", "minLength": 50 }
          }
        },
        "values_hierarchy": {
          "type": "object",
          "required": ["high_priority", "low_priority"],
          "properties": {
            "high_priority": { "type": "array", "minItems": 4, "items": { "type": "string" } },
            "low_priority": { "type": "array", "minItems": 4, "items": { "type": "string" } }
          }
        }
      }
    },
    "notable_patterns": {
      "type": "object",
      "required": ["unique_insight", "emotional_signature", "collaboration_style"],
      "properties": {
        "unique_insight": { "type": "string", "minLength": 100 },
        "emotional_signature": { "type": "string", "minLength": 100 },
        "collaboration_style": { "type": "string", "minLength": 50 }
      }
    }
  }
}
